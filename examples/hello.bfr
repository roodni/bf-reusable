// Hello World!

// 文字列を引数に取り、それを出力する命令列を返す
let gen_puts s = [
  $alloc { c }

  **let rec loop prev = function
      | () -> []
      | hd :: tl -> [
          + c (hd - prev)
          . c
          *loop hd tl
        ]
    in $
  
  *loop 0 (string_to_list s)
]

let main = [ *gen_puts "Hello World!\n" ]
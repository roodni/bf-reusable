codegen $

$build {
  a: array(_) { i: index };
  n;
} in

> a@i

+ n 2
! n [
  - n

  $dive a@i [
    $alloc { x: cell; } in
    < a@i
    + x '!'
    . x
  ]

  > a@i
]
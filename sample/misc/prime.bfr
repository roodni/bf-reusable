// トランスパイル時に素数を列挙する

import "../lib.bfr"
import "./puti.bfr"

let is_prime = fun n ->
  fix
    (fun loop -> fun i ->
      if i * i <= n then
        if n mod i = 0 then false
        else loop (i + 1)
      else true)
    2

codegen [
  $build {sp} in
  + sp ' '

  *fix
    (fun loop -> fun i ->
      if i < 100 then [
        *(if is_prime i then [
            *puti i
            . sp
          ] else [] )
        *loop (i + 1)
      ] else [])
    2
]
main {
  l: array_unlimited {
    p1: ptr;
    p2: ptr;
    buf: array(3) {
      i: ptr;
      x: cell;
    };
  };
} in

# ok
$dive l@p1 [
  $var { t: cell; } in
  > l@p1:buf@i
]

# ng
$dive l@p1:buf@i [
  $var { t: cell; } in
  > l@p1
]

# ng
$dive l@p1:buf@i [
  $var { t: cell; } in
  > l@p2:buf@i
]